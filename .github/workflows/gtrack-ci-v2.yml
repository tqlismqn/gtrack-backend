name: gtrack-ci-v2
on:
  pull_request: { branches: [ "main" ] }
jobs:
  php-build:
    if: ${{ endsWith(github.repository, 'gtrack-backend') }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: shivammathur/setup-php@v2
        with:
          php-version: '8.3'
      - run: php -v
  node-build:
    if: ${{ endsWith(github.repository, 'gtrack-app') }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: |
          npm ci || true
          npm run lint || true
          npm run build || true
